"use strict";(globalThis.webpackChunkmy_own_blog=globalThis.webpackChunkmy_own_blog||[]).push([[2877],{12995:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"hack-the-box/starting-point/tier-1/appointment/appointment","title":"Appointment","description":"- Difficulty: Very easy","source":"@site/docs/hack-the-box/starting-point/tier-1/1-appointment/1-appointment.mdx","sourceDirName":"hack-the-box/starting-point/tier-1/1-appointment","slug":"/hack-the-box/starting-point/tier-1/appointment/","permalink":"/docs/hack-the-box/starting-point/tier-1/appointment/","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Web","permalink":"/docs/tags/web","description":"Includes write-ups on the topic of Web"}],"version":"current","sidebarPosition":1,"frontMatter":{"tags":["web"],"sidebar_position":1},"sidebar":"writeupsSidebar","previous":{"title":"Tier 1","permalink":"/docs/category/tier-1"},"next":{"title":"Sequel","permalink":"/docs/hack-the-box/starting-point/tier-1/sequel"}}');var r=t(74848),i=t(28453);const o={tags:["web"],sidebar_position:1},a="Appointment",c={},d=[{value:"\ud83d\udd0e Solution",id:"-solution",level:2},{value:"\u270f\ufe0f Task answers",id:"\ufe0f-task-answers",level:2},{value:"\ud83d\udea9Flag",id:"flag",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"appointment",children:"Appointment"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Difficulty:"})," Very easy"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-solution",children:"\ud83d\udd0e Solution"}),"\n",(0,r.jsx)(n.p,{children:"I started with a full-port fast service/version scan to find listening services:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nmap -p- -sV --min-rate 5000 <IP-address>\n"})}),"\n",(0,r.jsx)(n.p,{children:"The scan returned a single web service on port 80 running Apache:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"PORT   STATE SERVICE VERSION\r\n80/tcp open  http    Apache httpd 2.4.38 ((Debian))\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Opening ",(0,r.jsx)(n.code,{children:"http://10.129.174.181:80"})," in a browser showed a login page with a username/password form.\r\nWeb login forms are a common target in CTFs; one frequent class of vulnerability in such forms is SQL Injection, which occurs when user input is inserted directly into an SQL query without proper sanitization or parameterization."]}),"\n",(0,r.jsx)("div",{style:{width:"100%",margin:"0 auto"},children:(0,r.jsx)("img",{src:t(98209).A,style:{width:"100%",height:"auto"}})}),"\n",(0,r.jsx)(n.p,{children:"A typical backend query for authentication might look like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT * FROM users WHERE username = '<USER>' AND password = '<PASS>';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If the application concatenates the raw ",(0,r.jsx)(n.code,{children:"USER"})," value into that query, an attacker can craft input that alters the query logic.\r\nFor example, supplying ",(0,r.jsx)(n.code,{children:"admin' #"})," as the username (and any value for the password) results in the database receiving something like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT * FROM users WHERE username = 'admin' #' AND password = 'whatever';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In MySQL the ",(0,r.jsx)(n.code,{children:"#"})," symbol starts a comment, so everything after it is ignored.\r\nThe ",(0,r.jsx)(n.code,{children:"AND password = ..."})," part gets commented out, so the query effectively becomes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT * FROM users WHERE username = 'admin';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If an ",(0,r.jsx)(n.code,{children:"admin"})," row exists, the authentication check passes even though no valid password was provided.\r\n(Alternatives that achieve the same effect include ",(0,r.jsx)(n.code,{children:"admin' -- "})," - note that ",(0,r.jsx)(n.code,{children:"--"})," needs a trailing space to start a comment in many SQL dialects - or a Boolean bypass like ",(0,r.jsx)(n.code,{children:"' OR '1'='1"})," depending on how the query is constructed.)"]}),"\n",(0,r.jsxs)(n.p,{children:["Using the payload ",(0,r.jsx)(n.code,{children:"admin' #"})," as the username and leaving the password arbitrary allowed me to bypass authentication. After submitting the form I was logged in as admin and redirected to the page containing the flag."]}),"\n",(0,r.jsx)("div",{style:{width:"100%",margin:"0 auto"},children:(0,r.jsx)("img",{src:t(98610).A,style:{width:"100%",height:"auto"}})}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-task-answers",children:"\u270f\ufe0f Task answers"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 1: What does the acronym SQL stand for?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Structured Query Language"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 2: What is one of the most common type of SQL vulnerabilities?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"SQL Injection"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 3: What is the 2021 OWASP Top 10 classification for this vulnerability?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"A03:2021-Injection"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 4: What does Nmap report as the service and version that are running on port 80 of the target?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Apache httpd 2.4.38 ((Debian))"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 5: What is the standard port used for the HTTPS protocol?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"443"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 6: What is a folder called in web-application terminology?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Directory"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 7: What is the HTTP response code is given for 'Not Found' errors?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"404"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 8: Gobuster is one tool used to brute force directories on a webserver.\r\nWhat switch do we use with Gobuster to specify we're looking to discover directories, and not subdomains?"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"> gobuster -h                                \r\nNAME:\r\n   gobuster - the tool you love\r\n\r\nUSAGE:\r\n   gobuster command [command options]\r\n\r\nVERSION:\r\n   3.8\r\n\r\nAUTHORS:\r\n   Christian Mehlmauer (@firefart)\r\n   OJ Reeves (@TheColonial)\r\n\r\nCOMMANDS:\r\n   dir      Uses directory/file enumeration mode\r\n   vhost    Uses VHOST enumeration mode (you most probably want to use the IP address as the URL parameter)\r\n   dns      Uses DNS subdomain enumeration mode\r\n   fuzz     Uses fuzzing mode. Replaces the keyword FUZZ in the URL, Headers and the request body\r\n   tftp     Uses TFTP enumeration mode\r\n   s3       Uses aws bucket enumeration mode\r\n   gcs      Uses gcs bucket enumeration mode\r\n   help, h  Shows a list of commands or help for one command\r\n\r\nGLOBAL OPTIONS:\r\n   --help, -h     show help\r\n   --version, -v  print the version\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"dir"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 9: What single character can be used to comment out the rest of a line in MySQL?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.h1,{id:""}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Task 10: If user input is not handled carefully, it could be interpreted as a comment.\r\nUse a comment to login as admin without knowing the password.\r\nWhat is the first word on the webpage returned?"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Congratulations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"flag",children:"\ud83d\udea9Flag"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"e3d0796d002a446c0e622226f42e9672"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},98209:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/login-606fa571c1e53fbfe089a04515cee450.png"},98610:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/flag-eff99054660ecc22b6f86fc45ddd120a.png"}}]);