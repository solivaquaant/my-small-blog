"use strict";(self.webpackChunkmy_own_blog=self.webpackChunkmy_own_blog||[]).push([[8144],{8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},9636:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"pico-ctf/general-skills/rust-fixme-2","title":"Rust fixme 2","description":"- Description: The Rust saga continues? I ask you, can I borrow that, pleeeeeaaaasseeeee?","source":"@site/docs/pico-ctf/general-skills/rust-fixme-2.mdx","sourceDirName":"pico-ctf/general-skills","slug":"/pico-ctf/general-skills/rust-fixme-2","permalink":"/my-small-blog/docs/pico-ctf/general-skills/rust-fixme-2","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"tags":[]},"sidebar":"tutorialSidebar","previous":{"title":"Rust fixme 1","permalink":"/my-small-blog/docs/pico-ctf/general-skills/rust-fixme-1"},"next":{"title":"Rust fixme 3","permalink":"/my-small-blog/docs/pico-ctf/general-skills/rust-fixme-3"}}');var s=r(4848),i=r(8453);const a={tags:[]},l="Rust fixme 2",c={},o=[{value:"\ud83d\udd0e Solution",id:"-solution",level:2},{value:"\ud83d\udd10 Key takeaways",id:"-key-takeaways",level:2},{value:"\ud83d\udea9Flag",id:"flag",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rust-fixme-2",children:"Rust fixme 2"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Description:"})," The Rust saga continues? I ask you, can I borrow that, pleeeeeaaaasseeeee?"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Difficulty:"})," Easy"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-solution",children:"\ud83d\udd0e Solution"}),"\n",(0,s.jsxs)(n.p,{children:["After extracting the archive using ",(0,s.jsx)(n.code,{children:"tar -xvf fixme2.tar.gz"}),", you\u2019ll find the following files in the directory:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cargo.toml"}),"\n",(0,s.jsx)(n.li,{children:"Cargo.lock"}),"\n",(0,s.jsxs)(n.li,{children:["src/main.rs\r\nNow try compiling and running the project with ",(0,s.jsx)(n.code,{children:"cargo run"}),", you\u2019ll encounter the following error:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"error[E0596]: cannot borrow `*borrowed_string` as mutable, as it is behind a `&` reference\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This error occurs at a line like ",(0,s.jsx)(n.code,{children:'borrowed_string.push_str("...");'}),".\r\nThe issue here is that ",(0,s.jsx)(n.code,{children:"borrowed_string"})," is an immutable reference (",(0,s.jsx)(n.code,{children:"&String"}),"), which means you cannot modify the data it points to.\r\nThe ",(0,s.jsx)(n.code,{children:".push_str()"})," method requires a mutable reference, because it alters the original String."]}),"\n",(0,s.jsxs)(n.p,{children:["To resolve this, the function needs to accept a mutable reference (",(0,s.jsx)(n.code,{children:"&mut String"}),") instead.\r\nChange this function signature:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"fn decrypt(encrypted_buffer: Vec<u8>, borrowed_string: &String) { // How do we pass values to a function that we want to change?\n"})}),"\n",(0,s.jsx)(n.p,{children:"to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"fn decrypt(encrypted_buffer: Vec<u8>, borrowed_string: &mut String) { \n"})}),"\n",(0,s.jsxs)(n.p,{children:["Since we've updated the function to accept a ",(0,s.jsx)(n.code,{children:"&mut"})," reference, we also need to modify the caller accordingly.\r\nIn the main() function, change:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let party_foul = String::from("Using memory unsafe languages is a: "); // Is this variable changeable?\r\ndecrypt(encrypted_buffer, &party_foul); // Is this the correct way to pass a value to a function so that it can be changed?\n'})}),"\n",(0,s.jsx)(n.p,{children:"to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let mut party_foul = String::from("Using memory unsafe languages is a: "); \r\ndecrypt(encrypted_buffer, &mut party_foul);\n'})}),"\n",(0,s.jsx)(n.p,{children:"With these changes in place, recompile the project and this time, the program should run successfully and print the flag."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500(kali\u327fkali)-[~/Desktop/pico-ctf/fixme2]\r\n\u2514\u2500$ cargo run           \r\n   Compiling rust_proj v0.1.0 (/home/kali/Desktop/pico-ctf/fixme2)\r\n    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.34s\r\n     Running `target/debug/rust_proj`\r\nUsing memory unsafe languages is a: PARTY FOUL! Here is your flag: picoCTF{4r3_y0u_h4v1n5_fun_y31?}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-key-takeaways",children:"\ud83d\udd10 Key takeaways"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"&T"})," \u2192 Immutable reference: you cannot modify the data."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"&mut T"})," \u2192 Mutable reference: you can modify the data."]}),"\n",(0,s.jsx)(n.li,{children:"If a function needs to mutate a value, it must accept a &mut reference."}),"\n",(0,s.jsx)(n.li,{children:"The original variable must be declared as mut to be passed as mutable."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"flag",children:"\ud83d\udea9Flag"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"picoCTF{4r3_y0u_h4v1n5_fun_y31?}"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);